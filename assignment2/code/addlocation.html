<!doctype html>
<html>

<head>
    <title>Weather</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.1.3/material.indigo-pink.min.css">
    <script src="https://storage.googleapis.com/code.getmdl.io/1.1.3/material.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="css/weatherapp.css" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="shortcut icon" sizes="196x196" href="images/icon.png" />
    <link rel="apple-touch-icon-precomposed" href="images/icon.png" />
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAarudkUpoo_sjt1ljL0mjW242GloOk8kk&libraries=places">
    <script src="js/locationWeatherCache.js"></script>

</head>

<body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <button onclick="location.href = 'index.html';" class="mdl-layout-icon mdl-button mdl-js-button mdl-button--icon">
                <i class="material-icons">arrow_back</i>
            </button>
            <div class="mdl-layout__header-row">
                <span class="mdl-layout-title" id="headerBarTitle">Add Location</span>
            </div>
        </header>
        <main class="mdl-layout__content">
            <div class="content-grid mdl-grid">
                <div class="mdl-cell">
                    <!--   Main page content here:   -->


                    <!--<form name="addLocation" method="POST" action="geocodingSandbox.html" commandName="location" onsubmit="changeAdress()">-->
                    <div align = "center">   
                        <br>

                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" id="nickname">
                            <label class="mdl-textfield__label" for="nickname">Name Your Location...</label>
                        </div>
                        <br>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" id="pac-input">
                            <label class="mdl-textfield__label" for="pac-input">Where Is It?</label>
                        </div>
                        
                        <br>
                        <br>
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" id= "submit" onclick="">
                          Save Location
                        </button>

                    <br>
                    <br>
                    <div id="map"></div>
                    
    <script>
    function initAutocomplete() 
        {
                var map = new google.maps.Map(document.getElementById('map'), 
                {
                  center: {lat: -33.8688, lng: 151.2195},
                  zoom: 13
                });

                // Create the search box and link it to the UI element.
                var input = document.getElementById('pac-input');
                var searchBox = new google.maps.places.SearchBox(input);

                // Bias the SearchBox results towards current map's viewport.
                map.addListener('bounds_changed', function() 
                {
                    searchBox.setBounds(map.getBounds());
                });

                var markers = [];
            // Listen for the event fired when the user selects a prediction and retrieve
            // more details for that place.
            searchBox.addListener('places_changed', function() 
            {
                var places = searchBox.getPlaces();

                if (places.length == 0) 
                {
                return;
                }

          // Clear out the old markers.
          markers.forEach(function(marker) 
          {
            marker.setMap(null);
          });
                
          markers = [];

          // For each place, get the icon, name and location.
          var bounds = new google.maps.LatLngBounds();
                
          places.forEach(function(place) 
            {
            var icon = 
                {
                  url: place.icon,
                  size: new google.maps.Size(71, 71),
                  origin: new google.maps.Point(0, 0),
                  anchor: new google.maps.Point(17, 34),
                  scaledSize: new google.maps.Size(25, 25)
                };

            // Create a marker for each place.
            markers.push(new google.maps.Marker({
              map: map,
              icon: icon,
              title: place.name,
              position: place.geometry.location
            }));

            if (place.geometry.viewport) 
            {
              // Only geocodes have viewport.
              bounds.union(place.geometry.viewport);
            } else {
              bounds.extend(place.geometry.location);
            }
          });
                
          map.fitBounds(bounds);
        });
      }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAarudkUpoo_sjt1ljL0mjW242GloOk8kk&libraries=places&callback=initAutocomplete"
         async defer></script>
                    </div>     
                </div>
            </div>
        </main>
    </div>

</body>

</html>